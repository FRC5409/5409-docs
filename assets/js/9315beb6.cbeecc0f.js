"use strict";(self.webpackChunk_5409=self.webpackChunk_5409||[]).push([[150],{2594:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Data Logging/Layers","title":"Subsytem Layers","description":"The IO Layer","source":"@site/docs/Data Logging/Layers.md","sourceDirName":"Data Logging","slug":"/Data Logging/Layers","permalink":"/5409-docs/docs/Data Logging/Layers","draft":false,"unlisted":false,"editUrl":"https://github.com/frc5409/5409-docs/tree/main/docs/Data Logging/Layers.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"Layers","title":"Subsytem Layers","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Intro","permalink":"/5409-docs/docs/Data Logging/DataLogging"},"next":{"title":"Extra Logging","permalink":"/5409-docs/docs/Data Logging/OtherLogging"}}');var o=n(4848),i=n(8453);const s={id:"Layers",title:"Subsytem Layers",sidebar_position:2},a=void 0,l={},d=[{value:"The IO Layer",id:"the-io-layer",level:2},{value:"Real/Simulated IO Layer",id:"realsimulated-io-layer",level:2},{value:"The Logic Layer",id:"the-logic-layer",level:2}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h2,{id:"the-io-layer",children:"The IO Layer"}),"\n",(0,o.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(46, 133, 85, 0.08)",borderRadius:"6px",marginBottom:"1.5rem",borderLeft:"3px solid var(--ifm-color-primary)"},children:(0,o.jsxs)(t.p,{children:["This layer is the transition layer between logic and Input/Output (IO). This layer will contain ",(0,o.jsx)(t.strong,{children:"all"})," variables that are used for logic and other variables that should be logged."]})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"As of the 2025 season"}),", this is an example of what this layer might look like:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-java",children:"public interface ElevatorIO {\r\n    @AutoLog\r\n    public class ElevatorInputs {\r\n        public boolean motorConnected    = false;\r\n        public double  appliedVoltage    = 0.0;\r\n        public double  appliedCurrent    = 0.0;\r\n        public double  motorTemperature  = 0.0;\r\n        public double  motorPosition     = 0.0;\r\n        public double  motorVelocity     = 0.0;\r\n    }\r\n\r\n    public default void updateInputs(ElevatorInputs inputs) {}\r\n\r\n    public default void setSetpoint(Distance setpoint) {}\r\n\r\n    public default Distance getPosition() {return Meters.of(0.0);}\r\n}\n"})}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.p,{children:["The file is recommended to be named ",(0,o.jsx)(t.code,{children:"ElevatorIO.java"})]})}),"\n",(0,o.jsx)(t.admonition,{type:"warning",children:(0,o.jsxs)(t.p,{children:["This code is accurate as of 2025. More up-to-date information can be found ",(0,o.jsx)(t.a,{href:"https://docs.advantagekit.org/",children:"here"})]})}),"\n",(0,o.jsxs)(t.p,{children:["As you can see, this file contains no logic, not even motors or simulated devices. This should ",(0,o.jsx)(t.strong,{children:"only contain"})," the variables to log. We then have one method called ",(0,o.jsx)(t.code,{children:"updateInputs(...)"})," - this method should be present in ",(0,o.jsx)(t.strong,{children:"all"})," IO layers. This method will update all of the variables in the inputs to their latest values. The other methods are used to directly interact with simulated devices or motors: set voltage, set a PID position, coast/brake mode, etc."]}),"\n",(0,o.jsx)(t.h2,{id:"realsimulated-io-layer",children:"Real/Simulated IO Layer"}),"\n",(0,o.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(255, 179, 67, 0.08)",borderRadius:"6px",marginBottom:"1.5rem"},children:(0,o.jsxs)(t.p,{children:["A real IO layer should implement the IO layer interface. This means it will take all of the methods from the IO layer and can then be modified to include simulated devices or motor devices. The naming convention for this file should be ",(0,o.jsx)(t.code,{children:"ElevatorIO{motorController}"}),"."]})}),"\n",(0,o.jsxs)(t.p,{children:["Here's an example of what a ",(0,o.jsx)(t.strong,{children:"real"})," IO layer could look like:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-java",children:"public class ElevatorIOTalonFX implements ElevatorIO {\r\n\r\n    private final TalonFX motor;\r\n\r\n    private PositionVoltageRequest positionRequest;\r\n\r\n    public ElevatorIOTalonFX(int ID) {\r\n        motor = new TalonFX(ID);\r\n\r\n        positionRequest = new PositionVoltage(0);\r\n\r\n        /*\r\n            Motor configs here...\r\n        */\r\n    }\r\n\r\n    @Override\r\n    public void setSetpoint(Distance setpoint) {\r\n        motor.setControl(positionRequest.withPosition(setpoint.in(Meters)));\r\n    }\r\n\r\n    /*\r\n        Other Override methods here...\r\n    */\r\n\r\n    @Override\r\n    public void updateInputs(ElevatorInputs inputs) {\r\n        // NOTE: This is an example, these methods do not exist. Check docs to find the correct methods\r\n\r\n        inputs.motorConnected   = motor.isConnected();\r\n        inputs.appliedVoltage   = motor.getAppliedVoltage();\r\n        inputs.appliedCurrent   = motor.getAppliedCurrent();\r\n        inputs.motorTemperature = motor.getTemperature();\r\n        inputs.motorPosition    = motor.getPosition();\r\n        inputs.motorVelocity    = motor.getVelocity();\r\n    }\r\n}\n"})}),"\n",(0,o.jsx)(t.admonition,{type:"warning",children:(0,o.jsx)(t.p,{children:"This motor controller API was last validated in 2025 please read the docs to the motor controller you are using"})}),"\n",(0,o.jsx)(t.h2,{id:"the-logic-layer",children:"The Logic Layer"}),"\n",(0,o.jsx)("div",{style:{padding:"1rem",backgroundColor:"rgba(111, 66, 193, 0.08)",borderRadius:"6px",marginBottom:"1.5rem"},children:(0,o.jsxs)(t.p,{children:["The logic layer does exactly what the name says, it handles ",(0,o.jsx)(t.strong,{children:"all"})," logic of the subsystem. This logic layer will take in the IO layer in the constructor, this is how different IOs get sent to it while still using the ",(0,o.jsx)(t.strong,{children:"same logic"}),"."]})}),"\n",(0,o.jsx)(t.p,{children:"Then update inputs and logging inputs can be called in periodic. Here's an example of what a subsystem might look like:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-java",children:'public class Elevator extends SubsystemBase {\r\n\r\n    private final ElevatorIO io;\r\n    private final ElevatorIOInputs inputs = new ElevatorIOInputs();\r\n\r\n    public Elevator(ElevatorIO io) {\r\n        this.io = io;\r\n    }\r\n\r\n    public Command exampleCommand() {\r\n        return Commands.runOnce(() -> io.setSetpoint(Meters.of(0.1)), this); // Command Factory\r\n    }\r\n\r\n    @Override\r\n    public void periodic() {\r\n        io.updateInputs(inputs);\r\n        Logger.processInputs("Elevator", inputs);\r\n    }\r\n}\n'})}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsx)(t.p,{children:"Create command factory methods for basic functions in your subsystem"})}),"\n",(0,o.jsx)(t.admonition,{type:"warning",children:(0,o.jsxs)(t.p,{children:["This code is accurate as of 2025. More up-to-date information can be found ",(0,o.jsx)(t.a,{href:"https://docs.advantagekit.org/",children:"here"})]})})]})}function p(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var r=n(6540);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);